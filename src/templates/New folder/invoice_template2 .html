<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Invoice</title>
    <style>
        body {
            font-family:"Shippori Mincho B1", "Times New Roman", serif;
            margin: 0;
            padding: 30px;
            background-color: white;
        }
        header {
            color: #000000;
            padding: 15px 15px;
            background-color: #ebe8e8; /* Dark background for contrast */
            margin-bottom: 18px;
            display: flex;
            justify-content: space-between;
        }
        header img {
            height: 60px;
            width: 58px;
        }
        header h1 {
            color: #000000d7;
            font-size: 20px;
            font-weight: bold;
            word-spacing: 6px;
        }
        
        .com
        {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            overflow: hidden;  
            margin-bottom: 15px; 
        }
.com strong {
    color: #1f1d1d;
    font-size: 15px;
    font-weight: bold;
    display: block;
    margin-bottom: -12px; /* Decrease the gap */
}
.placeholder {
    color: #242424; /* Light gray */
    font-weight: bold; /* Optional: make it less bold */
    font-size: 14px;
    min-width: 120px; /* Adjust width to keep colons aligned */
    display: inline-block;
    text-align: left;
    margin-right: 5px;
    flex-shrink: 0; /* Prevents placeholder from shrinking */
}
.com td {
    margin-top: -50px;
    font-size: 13px; /* Adjust text size */
    line-height: 1.5; /* Space between lines */
    word-wrap: break-word; /* Ensures long words break properly */
    white-space: normal; /* Allows text to wrap */
    color: #525151;
    white-space: normal; /* Allows text to break into multiple lines */
}
.info-row {
    display: flex;
    align-items: flex-start; /* Aligns text from the top */
}
.info-row span:last-child {
    flex-grow: 1; /* Allows text to wrap */
    word-wrap: break-word; /* Ensures long text breaks properly */
    white-space: normal; /* Enables wrapping */
}
/* Styling for invoice table */
.invoice-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed; /* Ensures even column spacing */
    margin-top: 25px;
}

/* Table header styling */
.invoice-table th {
    background-color: #b4b4b4; /* Light gray for better contrast */
    color: #000; /* Black text for visibility */
    font-size: 13px;
    padding: 10px;
    text-align: left;
    border-bottom: 2px solid white;
    word-wrap: break-word; /* Breaks long words */
    white-space: normal; /* Allows wrapping */
    overflow-wrap: break-word; /* Ensures breaking */
}

/* Table cell styling */
.invoice-table td {
    word-wrap: break-word; /* Breaks long words */
    white-space: normal; /* Allows wrapping */
    overflow-wrap: break-word; /* Ensures breaking */
    padding: 10px;
    font-size: 13px;
    color: #242424; /* Light gray */
    font-weight: bold;
    border-bottom: 2px solid rgb(255, 255, 255);
    background-color: #dad7d777;
}

/* Adjusting column widths */
.invoice-table th:nth-child(1), /* Bill To */
.invoice-table td:nth-child(1) {
    width: 20%; /* Increase width */
}

.invoice-table th:nth-child(2), /* Place of Supply */
.invoice-table td:nth-child(2) {
    width: 25%; /* Increase width */
}

.invoice-table th:nth-child(3), /* Invoice No */
.invoice-table td:nth-child(3) {
    width: 15%;
}

.invoice-table th:nth-child(4), /* PO Ref */
.invoice-table td:nth-child(4) {
    width: 15%;
}

.invoice-table th:nth-child(5), /* Date */
.invoice-table td:nth-child(5) {
    width: 15%;
}

/* Styling for table-container */
.table-container {
    position: relative; /* Acts as a reference for absolute positioning */
    display: flex;
    flex-direction: column; /* Stacks tables vertically */
    align-items: flex-end; /* Aligns the summary table to the right */
    margin-top: 20px;
}

/* Styling for invoice-details */
.invoice-details {
    width: 100%;
    border-collapse: collapse;
    margin-top: 25px;
    table-layout: fixed; /* Ensures even column spacing */
}

.invoice-details th, 
.invoice-details td {
    padding: 10px;
    text-align: left;
}

.invoice-details th {
    font-weight: bold;
    border-top: 2px solid rgb(255, 255, 255);
    background-color: #b4b4b4; /* Light gray for better contrast */
    color: #000; /* Black text for visibility */
    font-size: 13px;
    word-wrap: break-word; /* Breaks long words */
    white-space: normal; /* Allows wrapping */
    overflow-wrap: break-word; /* Ensures breaking */
}

.invoice-details td {
    word-wrap: break-word; /* Breaks long words */
    white-space: normal; /* Allows wrapping */
    overflow-wrap: break-word; /* Ensures breaking */
    font-size: 13px;
    color: #242424; /* Light gray */
    font-weight: bold;
    border-top: 2px solid rgb(255, 255, 255);
    background-color: #dad7d777;
}

/* Make the first column (Description of Goods/Service) wider */
.invoice-details td:first-child, 
.invoice-details th:first-child {
    width: 20%; /* Adjust the width as needed */
}

/* Adjust the remaining column widths */
.invoice-details td:nth-child(2),
.invoice-details th:nth-child(2) {
    width: 15%;
}

.invoice-details td:nth-child(3),
.invoice-details th:nth-child(3),
.invoice-details td:nth-child(4),
.invoice-details th:nth-child(4),
.invoice-details td:nth-child(5),
.invoice-details th:nth-child(5),
.invoice-details td:nth-child(6),
.invoice-details th:nth-child(6) {
    width: 10%;
}

/* Styling for summary-table*/
.summary-table {
    width: 400px; /* Adjust width as needed */
    border-collapse: collapse;
    margin-top: 26px; /* Space between order table and summary table */
}

.summary-table td {
    padding: 5px 0;
    text-align: left;
    border-bottom: 1px dotted #808080 !important; /* Adds only a grey underline */
    font-size: 14px;
}

.summary-table td:last-child {
    text-align: right;
}

/* Remove border for the last row */
.summary-table tr:last-child td {
    border-top: none !important; /* Ensures no top border */
    border-bottom: none !important; /* Ensures no bottom border */
    background-color: #cac9c9 !important; /* Make the last row gray */
}

/* Ensures the second last row has a bottom border for separation */
.summary-table tr:nth-last-child(2) td {
    border-bottom: none !important;
}

/* Styling for bank-table*/
.bank {
    width: 100%;
    border-collapse: collapse;
    margin-top: 33px;
}

.bank td {
    vertical-align: top;
    width: 50%;
    font-size: 13px; /* Adjust text size */
    line-height: 1.5; /* Space between lines */
    word-wrap: break-word; /* Ensures long words break properly */
    color: #525151;
    white-space: normal; /* Allows text to break into multiple lines */
    text-align: left;
}

/* Left and right columns */
/* .left-column {
    text-align: left;
}

.right-column {
    text-align: right;
} */

/* Styling for strong tags (titles) */
.bank strong {
    display: block;
    font-size: 15px;
    font-weight: bold;
    margin-bottom: 8px;
    color: #1f1d1d;
    text-align: left;
}

/* Placeholder styles */
.info-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.placeholder {
    color: #242424; /* Light gray */
    font-weight: bold; /* Optional: make it less bold */
    font-size: 14px;
    min-width: 120px; /* Adjust width to keep colons aligned */
    display: inline-block;
    text-align: left;
    margin-right: 5px;
    flex-shrink: 0; /* Prevents placeholder from shrinking */
}

/* Icons styling */
.bank i {
    margin-right: 5px;
}

/* Note styling */
.note {
    margin-top: 30px;
}

.note h3 {
    display: block;
    font-size: 15px;
    font-weight: bold;
    margin-bottom: 8px;
    color: #1f1d1d;
    text-align: left;
}

.note h3::before {
    content: "\f05a"; /* Font Awesome info-circle icon */
    font-family: "Font Awesome 5 Free";
    margin-right: 8px;
}

.note ul {
    padding-left: 71px; /* Indent list */
    margin: 5px 0;
    list-style: none; /* Remove default bullets */
}

.note li {
    font-size: 14px;
    line-height: 1.5; /* Space between lines */
    word-wrap: break-word; /* Ensures long words break properly */
    color: #525151;
    white-space: normal; /* Allows text to break into multiple lines */
    text-align: left;
    margin-bottom: 5px;
    position: relative;
}

.note li::before {
    content: "☛"; 
    font-size: 14px;
    position: absolute;
    left: -19px;
    top: 2px;
}

footer {
    background-color: #ebe8e8; /* Dark background for contrast */
    color: #ffffff; /* White text for readability */
    text-align: center; /* Center align content */
    padding: 5px 5px; /* Proper spacing */
    font-size: 14px; /* Optimal text size */
    font-weight: 400;
    margin-top: 40px;
}

footer p {
    margin: 0;
    padding: 5px 0;
    line-height: 1.6;
    color: #3b3b3a; /* Highlight company name with gold */
}

footer strong {
    font-weight: bold;
    color: #333331; /* Highlight company name with gold */
}


    </style>
</head>
<body>
    <header>
        <img src="{{ logo_url }}" alt="Company Logo">
        <h1>Tax Invoice</h1>
    </header>

    <table class="com">
        <tr>
            <td>
                <strong><i class="fas fa-info-circle"></i> Company Details:</strong><br>
                <div class="info-row">
                    <span class="placeholder">Company Name:</span> <span>{{ company_name }}</span>
                </div>
                <div class="info-row">
                    <span class="placeholder">Address:</span> <span>{{ company_address }}</span>
                </div>
                <div class="info-row">
                    <span class="placeholder">GSTIN:</span> <span>{{ company_GSTIN }}</span>
                </div>
            </td>
        </tr>
    </table>
    
    
    
    <table class="invoice-table">
        <thead>
            <tr>
                <th>Bill To</th>
                <th>Place of Supply</th>
                <th>Invoice No.</th>
                <th>PO Ref</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ invoice.customer_name }}</td>
                <td>{{ invoice.place_of_supply }}</td>
                <td>{{ invoice.invoice_number }}</td>
                <td>{{ invoice.po_ref }}</td>
                <td>{{ invoice.insertDate }}</td>
            </tr>
        </tbody>
    </table>
    
    <div class="table-container">
        <!-- Order Details Table -->
        <table class="invoice-details">
            <thead>
                <tr>
                    <th>Description of Goods Service</th>
                    <th>SAC code</th>
                    <th>Quantity</th>
                    <th>Unit Price (₹)</th>
                    <th>Discount (₹)</th>
                    <th>Total (₹)</th>
                </tr>
            </thead>
            <tbody>
                {% for invoice in invoices %}
                <tr>
                    <td>{{ invoice.product_name }}</td>  <!-- Changed to match 'Description of Goods/Service' -->
                    <td>{{ invoice.sac_code }}</td>  <!-- Changed to match 'SAC Code' -->
                    <td>{{ invoice.quantity }}</td>  <!-- Correctly matches 'Quantity' -->
                    <td>₹ {{ invoice.unit_price }}</td>  <!-- Correctly matches 'Unit Price (₹)' -->
                    <td>₹ {{ invoice.discount }}</td>  <!-- Correctly matches 'Discount (₹)' -->
                    <td>₹ {{ invoice.total_amount }}</td>  <!-- Correctly matches 'Total (₹)' -->
                </tr>
                {% endfor %}
            </tbody>
        </table>
    
    
        <!-- Summary Table (Positioned Bottom Right) -->
        <table class="summary-table">
            <tr>
                <td><strong>Subtotal:</strong></td>
                <td>₹ {{ subtotal }}</td>
            </tr>
            <tr>
                <td><strong>Discount:</strong></td>
                <td>₹ {{ total_discount }}</td>
            </tr>
            <tr>
                <td><strong>Discounted Total:</strong></td>
                <td>₹ {{ discounted_total }}</td>
            </tr>
            <tr>
                <td><strong>Tax:</strong></td>
                <td>₹ {{ tax }}</td>
            </tr>
            <tr>
                <td><strong>Grand Total:</strong></td>
                <td>₹ {{ grand_total }}</td>
            </tr>
        </table>
    </div>
    
   
    
    <table class="bank">
        <tr>
            <td class="left-column">
                <strong><i class="fa-solid fa-indian-rupee-sign"></i> Amount Chargeable:</strong>
                <div class="info-row">
                    <span class="placeholder">Amount in Words:</span> <span>{{ amount_in_words }}</span>
                </div>
                <div class="info-row">
                    <span class="placeholder">Company PAN:</span> <span>{{ company_pan }}</span>
                </div>
            </td>
            <td class="right-column">
                <strong><i class="fas fa-university"></i> Bank Details:</strong>
                <div class="info-row">
                    <span class="placeholder">Current A/C No:</span> <span>{{ account_number }}</span>
                </div>
                <div class="info-row">
                    <span class="placeholder">Payee Name:</span> <span>{{ payee_name }}</span>
                </div>
                <div class="info-row">
                    <span class="placeholder">IFSC Code:</span> <span>{{ ifsc_code }}</span>
                </div>
                <div class="info-row">
                    <span class="placeholder">Branch Name:</span> <span>{{ branch_name }}</span>
                </div>
            </td>
        </tr>
    </table>
    
    
    <div class="note">
        <h3>Note</h3>
        <ul>
            {% if notes %}
                {% for note in notes %}
                    <li>{{ note }}</li>
                {% endfor %}
            {% else %}
                <li>No notes available.</li>
            {% endif %}
        </ul>
    </div>
    

    <footer>
        <p><strong>{{ company_name }}</strong> / {{ company_address }} / {{ company_contact }} / {{ company_email }}</p>
    </footer>
    

</body>
</html>